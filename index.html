<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Role Play Asylum</title>
    <link rel="icon" href="images/icon.png" type="image/png">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
<div id="site">
    <div id="header-placeholder"></div>

    <main id="app" class="app" role="main" aria-live="polite"></main>

    <div id="footer-placeholder"></div>

    <button id="scrollTop" class="scroll-top" aria-label="Scroll to top">â†‘</button>
</div>

<!-- Core scripts -->
<script src="js/i18n.js"></script>
<script src="js/auth.js"></script>
<script src="js/theme.js"></script>
<script src="js/slider.js"></script>
<script src="js/search.js"></script>
<script src="js/ui.js"></script>
<script src="js/games.js"></script>
<script src="js/archive.js"></script>
<script src="js/router.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        try {
            if (typeof initTheme === 'function') initTheme();

            if (typeof initLangSwitcher === 'function') initLangSwitcher();

            await loadPartial('partials/header.html', '#header-placeholder');
            if (typeof applyTranslations === 'function') applyTranslations(document.querySelector('#header-placeholder'));
            await loadPartial('partials/footer.html', '#footer-placeholder');

            if (typeof initTheme === 'function') initTheme();
            if (typeof initLangSwitcher === 'function') initLangSwitcher();

            if (typeof initAuth === 'function') initAuth();

            const start = 'pages/main.html';
            await loadPage(start, false);

            if (typeof initScrollTop === 'function') initScrollTop();

        } catch (e) {
            console.error('Startup error', e);
        }
    });
</script>
</body>
</html>
